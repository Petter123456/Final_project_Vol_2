<div id="container">

  <!-- Code generated at https://WeatherWidget.io -->
<a class="weatherwidget-io" href="https://forecast7.com/en/25d76n80d19/miami/" data-label_1="Miami" data-label_2="WEATHER" data-theme="orange" >Miami WEATHER</a>
<script>
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://weatherwidget.io/js/widget.min.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","weatherwidget-io-js");
</script>
</div>



  <h1>MiamiGolf</h1> <br>
<!-- map google  -->
<div class="container">

  <div id="map">
      <script type="text/javascript">
          $(function () {
              $('#datetimepicker4').datetimepicker({
                  viewMode: 'years'
              });
          });
      </script>
  </div>

  <%= form_tag(root_path, method: "get") do %>
    <div class="search_tee_time_date"> <br>
      <%= label_tag(:q, "Select the date you want to play") %> <br><br>
      <%= date_field_tag(:usersdate) %> <br><br><br>
      <%= submit_tag("Search") %>
    </div>
  <% end %>

</div>




<div class="table_container">
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <table class="table table-hover">
        <thead>
          <th class="table_header">Locationa</th>
          <th class="table_header">Teetimes</th>
          <th class="table_header">Reserve</th>
        </thead>
        <tbody>
          <% @request_tee_times["data"].each do |course| %>
            <tr>
              <td>
                <%= "#{course['courseName']}"%>
              </td>
              <td>
                <select>
                  <% course["teeTimes"].each do |tee| %>
                    <option class='optionsss'>
                      <%= " Tee time #{tee['teeTime']}"%>
                      <%= tee["purchase"]["price"]%> $

                    </option>
                  <%end%>
                </select>
              </td>
              <td>
                <button type="button" class="btn btn-primary book" data-toggle="modal" data-target="#exampleModal" course-id="<%=course['courseId']%>">Book
                </button>
              </td>
            </tr>
          <%end%>
        </tbody>
      </table>
    </div>
  </div>
</div>

  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <%= form_tag("/book", method: "post", id:"booking-form") do %>
            <%= label_tag(:q, "Name:") %>
            <%= text_field_tag(:name) %><br>
            <%= label_tag(:q, "Email:") %>
            <%= text_field_tag(:email) %><br>
            <%= label_tag(:q, "Telephone:") %>
            <%= text_field_tag(:telephone) %>
            <%= label_tag(:q, "Teetime:") %>
            <%= text_field_tag(:teetime) %>
            <%= hidden_field_tag(:hidden_golfcourse_id) %>
            <%# submit_tag("Search") %>
        <div class="form-row">
   <label for="card-element">
     Credit or debit card
   </label>
   <div id="card-element">
     <!-- a Stripe Element will be inserted here. -->
   </div>
        </div>
   <!-- Used to display form errors -->
   <div id="card-errors" role="alert"></div>
 </div>

 <button>Submit Payment</button>


        <!-- <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary reservation" >Proceed to Payment</button>
        </div> -->
          <% end %>
      </div>
    </div>
  </div>






<script type="text/javascript" >

  $('.btn.btn-primary.book').on('click', function(){
    var teetime = $(this).prev().children('option:selected').text().trim();
    $('#teetime').val(teetime)
    var courseId = $(this).attr('course-id');
    $('#hidden_golfcourse_id').val(courseId);

});
</script>
